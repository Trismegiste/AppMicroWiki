{% extends 'mobile.html.twig' %}

{% block title %}{{ document.title }} - {{ document.description }}{% endblock %}
{% block header_class %}headline{% endblock %}
{% block header_title %}{{ document.title }}{% endblock %}
{% block header_detail %}{{ document.description }}{% endblock %}
{% block header_footer %}
    <a href="{{ path('app_sentencecrud_append', {title: document.title}) }}" class="pure-button">Append</a>
{% endblock %}

{% block item_article %}
    {% if loop.first %}<a id="pinned-vertex"></a>{% endif %}
    <div class="pure-g">
        <div class="pure-u-7-8">
            <h2>{{ item.key }} <span class="category">{{ item.category }}</span></h2>
        </div>
        <div class="pure-u-1-8 pinned"><a href="{{ path('app_documentcrud_show',{title: document.title, key: item.key}) }}"><i class="icon-pin"></i></a></div>
    </div>
    <div class="content">{{ item.content|wiki(document) }}
        {% if loop.first %}
            {% set inbound = document.findVertexByLink(item.key) %}
            {% if inbound|length > 0 %}
                <br/>
                <i class="icon-link"></i> 
                {% for link in inbound %}
                    {% apply wiki(document) %}[[{{ link.key }}]]{% endapply %}
                    {%- if not loop.last %},{% endif %}
                {% endfor %}
            {% endif %}
        {% endif %}
    </div>
    <footer class="pure-g">
        <div class="pure-u-1-3 center">
            <a href="{{ path('app_sentencecrud_edit', {key:item.key, title:document.title}) }}"><i class="icon-pencil"></i></a>
        </div>
        <div class="pure-u-1-3 center">
            <a href="{{ path('app_sentencecrud_showqrcode', {key:item.key, title:document.title}) }}"><i class="icon-qrcode"></i></a>
        </div>
        {% if loop.first %}
            <div class="pure-u-1-3 center">
                <a href="{{ path('app_sentencecrud_delete', {key:item.key, title:document.title}) }}"><i class="icon-trash"></i></a>
            </div>
        {% endif %}
    </footer>
{% endblock %}